<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>2.2. Types of Agents</title><link rel="stylesheet" type="text/css" href="stylesheet.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"/><link rel="home" href="index.html" title="The Foglight Agent Manager Developer's Kit"/><link rel="up" href="ch02.html" title="Chapter 2. Creating Agents"/><link rel="prev" href="ch02.html" title="Chapter 2. Creating Agents"/><link rel="next" href="ch02s03.html" title="2.3. Agent Resource Negotiation"/><meta http-equiv="content-type" content="application/xhtml+xml; charset=utf-8"/></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.2. Types of Agents</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch02.html"><img src="images/prev.png" alt="Prev"/></a> </td><th width="60%" align="center">Chapter 2. Creating Agents</th><td width="20%" align="right"> <a accesskey="n" href="ch02s03.html"><img src="images/next.png" alt="Next"/></a></td></tr></table><hr/></div><img align="right" alt="[QUEST Logo]" src="images/quest_logo.gif"/><div class="section" title="2.2. Types of Agents"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="creating-agents-types"/>2.2. Types of Agents</h2></div></div></div><p>
      The agents that can be developed using this SDK fall into two broad categories:
      in-process agents and out-of-process agents.
      </p><div class="section" title="2.2.1. In-Process Agents"><div class="titlepage"><div><div><h3 class="title"><a id="in-process-agents"/>2.2.1. In-Process Agents</h3></div></div></div><p>
              It is preferred that you develop in-process agents. In-process agents 
              are hosted directly within the FglAM application, and they require 
              far fewer resources to run on the host system because they are able 
              to share the same Java VM as the FglAM application itself.
          </p><p>
              As of FglAM version 5.5.5.6, the security manager no longer prevents operations
              for in-process agents. Instead, any security-sensitive operation is now logged in the
              security audit log, which is located under the <span class="emphasis"><em>$FGLAM_STATE/logs/auditor</em></span> folder.
              This makes creating out-of-process agents for performing insecure operations unnecessary.
              An example auditor log:

              </p><pre class="programlisting">
2011-02-24 17:01:07.104 ECHO    &lt;SecurityAudit&gt; INFO [Quartz-0] com.quest.glue.common.util.auditor.AuditLogTarget -
    Action: SecurityManager.checkAccess
    Details: Agent FglAMTestAgents/5.5.5.6/InProcessAuditorAgent/Auditor.  Creating ThreadGroup Quartz
2011-02-24 17:01:07.106 ECHO    &lt;SecurityAudit&gt; INFO [Quartz-0] com.quest.glue.common.util.auditor.AuditLogTarget -
    Action: SecurityManager.checkAccess
    Details: Agent FglAMTestAgents/5.5.5.6/InProcessAuditorAgent/Auditor.  Creating Thread[Thread-6,5,Quartz]
2011-02-24 17:01:07.106 ECHO    &lt;SecurityAudit&gt; INFO [Quartz-0] com.quest.glue.common.util.auditor.AuditLogTarget -
    Action: SecurityManager.checkAccess
    Details: Agent FglAMTestAgents/5.6.0/InProcessAuditorAgent/Auditor.  Creating Thread[Thread-6,5,Quartz]
...
              </pre><p>
          </p></div><div class="section" title="2.2.2. Out-of-Process Agents"><div class="titlepage"><div><div><h3 class="title"><a id="out-of-process-agents"/>2.2.2. Out-of-Process Agents</h3></div></div></div><p>
              Occasionally there are cases where the agents require non-standard VM settings. Such agents must be
              flagged as out-of-process (OOP) agents. The agent manifest can include the VM settings and the master
              will launch a slave VM with the required configuration.
          </p><p>
              These agents are run by FglAM in a separate process. When an AgentPackage / GAR file is deployed
              that is marked to run out-of-process, the FglAM master will immediately launch this OOP
              FglAM instance, and it will remain running even if there are no agent instances defined or if none of the
              existing agents are collecting data. Any security-sensitive operations performed by these agents are
              logged in the security audit log under the <span class="emphasis"><em>$FGLAM_STATE_DIR/logs/auditor</em></span> folder.              
          </p><p>
              The FglAM master will monitor the OOP instances that are deployed
              and should an OOP VM process crash, the FglAM master will relaunch
              that VM process and allow its agents to restart. This effectively isolates
              the impact of the crash to the agents running solely within their AgentPackage /
              OOP VM instance. 
          </p><p>
              To enable an agent to be run out of process, the associated agent package 
              must set the out-of-process attribute in the <span class="emphasis"><em>agent-definition.xml</em></span>
              to enabled. Because the agent package itself is set to out-of-process,
              <span class="emphasis"><em>all</em></span> agents defined within the package are run within 
              this separate VM.
          </p></div></div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch02.html"><img src="images/prev.png" alt="Prev"/></a> </td><td width="20%" align="center"><a accesskey="u" href="ch02.html"><img src="images/up.png" alt="Up"/></a></td><td width="40%" align="right"> <a accesskey="n" href="ch02s03.html"><img src="images/next.png" alt="Next"/></a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 2. Creating Agents </td><td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Home"/></a></td><td width="40%" align="right" valign="top"> 2.3. Agent Resource Negotiation</td></tr></table></div></body></html>